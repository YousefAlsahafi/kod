<Schema name="Dellstore Schema">
  <Cube name="Order" cache="true" enabled="true">
    <Table name="order_fact" schema="public">
    </Table>
    <Dimension name="zip" type="StandardDimension" highCardinality="false">
      <Hierarchy name="zip" hasAll="true">
        <Level name="zip" column="zip" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension name="creditcardtype" type="StandardDimension" highCardinality="false">
      <Hierarchy name="creditcardtype" hasAll="true">
        <Level name="creditcardtype" column="creditcardtype" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension name="gender" type="StandardDimension" highCardinality="false">
      <Hierarchy name="gender" hasAll="true">
        <Level name="gender" column="gender" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Measure name="amount" column="totalamount" aggregator="sum" visible="true">
    </Measure>
    <Measure name="unique customers" column="customerid" aggregator="distinct-count" visible="true">
    </Measure>
    <Measure name="orders" column="orderid" aggregator="count" visible="true">
    </Measure>
    <Measure name="Existing Customer Rate" formatString="0.0%" aggregator="avg">
      <MeasureExpression>
        <SQL dialect="generic">
          <![CDATA[(case when orderdate > reg_date then 1 else 0
          end)]]>
        </SQL>
      </MeasureExpression>
    </Measure>
    <CalculatedMember
        name="GenderPercent"
        dimension="Measures"
        formula="[Measures].[orders] / ([Measures].[orders],
                 Axis(1).Item(0).CurrentMember.Parent)">
      <CalculatedMemberProperty
          name="FORMAT_STRING"
          value="0.0%"/>
    </CalculatedMember>
  </Cube>
  
  
</Schema>
